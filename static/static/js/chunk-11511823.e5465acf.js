(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11511823"],{"192f":function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"app-container"},[t("el-tabs",{on:{"tab-click":e.handleTabChange},model:{value:e.activeName,callback:function(a){e.activeName=a},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"相关性插补",name:"1"}},[t("div",[t("h2",{staticClass:"page-title text-center pb-10"},[e._v("相关性插补")]),t("div",[t("div",[t("CurrencyForm",{key:e.flag,ref:"correlationForm",attrs:{id:"correlationForm","form-key":1,"ref-name":"currencyForm","label-width":"150px","config-data":e.formData,"form-handle":e.formHandle,inline:!1},on:{submit:e.handleSubmit,changeCode:e.handleChangeCode,changeSourceCode:e.handleChangeSourceCode}})],1)])])]),t("el-tab-pane",{attrs:{label:"风切变插补",name:"2"}},[t("div",[t("h2",{staticClass:"page-title text-center pb-10"},[e._v("风切变插补")]),t("div",[t("div",[t("CurrencyForm",{key:e.flag,ref:"shearForm",attrs:{id:"shearForm","form-key":2,"ref-name":"currencyForm","label-width":"150px","config-data":e.formData,"form-handle":e.formHandle,inline:!1},on:{changeCode:e.handleChangeCode,submit:e.handleSubmit}})],1)])])]),t("el-tab-pane",{attrs:{label:"比值法插补",name:"3"}},[t("div",[t("h2",{staticClass:"page-title text-center pb-10"},[e._v("比值法插补")]),t("div",[t("div",[t("CurrencyForm",{key:e.flag,ref:"ratioForm",attrs:{id:"ratioForm","form-key":3,"ref-name":"currencyForm","label-width":"150px","config-data":e.formData,"form-handle":e.formHandle,inline:!1},on:{changeCode:e.handleChangeCode,submit:e.handleSubmit,changeSourceCode:e.handleChangeSourceCode}})],1)])])]),t("el-tab-pane",{attrs:{label:"前后替代插补",name:"4"}},[t("div",[t("h2",{staticClass:"page-title text-center pb-10"},[e._v("前后替代插补")]),t("div",[t("CurrencyForm",{key:e.flag,ref:"anteriorForm",attrs:{id:"anteriorForm","form-key":4,"ref-name":"currencyForm","label-width":"150px","config-data":e.formData,"form-handle":e.formHandle,inline:!1},on:{changeCode:e.handleChangeCode,submit:e.handleSubmit}})],1)])]),t("el-tab-pane",{attrs:{label:"前后均值替代插补",name:"5"}},[t("div",[t("h2",{staticClass:"page-title text-center pb-10"},[e._v("前后均值替代插补")]),t("div",[t("div",[t("CurrencyForm",{key:e.flag,ref:"anteriorAverageForm",attrs:{id:"anteriorAverageForm","form-key":5,"ref-name":"currencyForm","label-width":"150px","config-data":e.formData,"form-handle":e.formHandle,inline:!1},on:{changeCode:e.handleChangeCode,submit:e.handleSubmit}})],1)])])])],1)],1)},r=[],s=t("ccce"),n=t("31ed"),o=t("4c7d"),l=t("e50c");const u={1:"correlationForm",2:"shearForm",3:"ratioForm",4:"anteriorForm",5:"anteriorAverageForm"};var m={name:"Interpolation",components:{CurrencyForm:s["a"]},data(){return{activeName:"1",listLoading:!1,dialogVisible:!1,formData:[{type:"elSelect",variable:"ID",name:"被插补测风塔:",multiple:!1,data:[],clearable:!0,colProps:{xl:8,lg:8,md:12,sm:12,xs:24},rules:[{required:!0,message:"请选择被插补测风塔",trigger:"blur"}],emit:"changeCode"},{type:"elSelect",variable:"channelName",name:"被插补通道:",multiple:!1,data:[],colProps:{xl:8,lg:8,md:12,sm:12,xs:24},rules:[{required:!0,message:"请选择被插补通道",trigger:"blur"}],disabled:!0,emit:"changeChannel"},{type:"elDatePicker",variable:"queryTime",name:"插补时间:",valueFormat:"yyyy-MM-dd",clearable:!0,pickerType:"daterange",colProps:{xl:8,lg:8,md:12,sm:12,xs:24},rules:[{required:!0,message:"请选择插补时间",trigger:"blur"}],disabled:!0},{type:"elSelect",variable:"sourceID",name:"插补数据源测风塔:",multiple:!1,data:[],colProps:{xl:8,lg:8,md:12,sm:12,xs:24},rules:[{required:!0,message:"请选择插补数据源测风塔",trigger:"blur"}],ifShow:!1,disabled:!0,emit:"changeSourceCode"},{type:"elSelect",variable:"sourceChannelName",name:"插补数据源通道:",multiple:!1,data:[],colProps:{xl:8,lg:8,md:12,sm:12,xs:24},rules:[{required:!0,message:"请选择插补数据源通道",trigger:"blur"}],ifShow:!1,disabled:!0},{type:"elDatePicker",variable:"sourceQueryTime",name:"插补源时间:",valueFormat:"yyyy-MM-dd",clearable:!0,pickerType:"daterange",colProps:{xl:8,lg:8,md:12,sm:12,xs:24},rules:[{required:!0,message:"请选择插补源时间",trigger:"blur"}],ifShow:!1,disabled:!0},{type:"elInput",variable:"K",name:"比值K:",clearable:!0,colProps:{xl:8,lg:8,md:12,sm:24,xs:24},disabled:!0,ifShow:!1,rules:[{required:!0,message:"请输入比值K",trigger:"blur"}]}],formHandle:[{type:"primary",name:"插补",emit:"submit",colProps:{xl:8,lg:8,md:12,sm:12,xs:24}}],title:"",defaultValue:{},defaultMakeupValue:{},channelList:null,channelListMap:{},dateRange:[],sourceDateRange:[],shadowAnalysisTitle:"",multipleSelection:[],loading:null,timer:null,noData:!0,flag:0}},async mounted(){await this.getWindTower(),this.handleTabChange({name:this.activeName})},methods:{async getTowerDetail(e,a){const t=await Object(n["e"])({ID:e}),i=t.data;a?(this.sourceDateRange=[],i&&i.STARTTIME&&i.ENDTIME?this.sourceDateRange=[i.STARTTIME,i.ENDTIME]:this.sourceDateRange=[]):(window.localStorage.setItem("ATM_CURRENT_TOWER_ID",e),i&&i.STARTTIME&&i.ENDTIME?this.dateRange=[i.STARTTIME,i.ENDTIME]:this.dateRange=[])},async getWindTower(){const e=await Object(n["a"])({userType:this.$store.getters.roles,organize:this.$store.getters.organize});if(200===e.code){const a=e&&e.data;console.log(a),this.formData[0].data=[],Object.keys(a).forEach(e=>{this.formData[0].data.push({label:a[e],value:e})})}},async getChannels(e,a){const t=await Object(l["p"])({ID:e,channelType:"2"===this.activeName?2:1});if(200===t.code){const e=t&&t.data;a?(this.formData[4].data=[],Object.keys(e).forEach(a=>{this.formData[4].data.push({label:e[a],value:a}),this.formData[4].disabled=!1})):(this.formData[1].data=[],this.formData[4].data=[],Object.keys(e).forEach(a=>{this.formData[1].data.push({label:e[a],value:a})})),this.channelListMap=Object.assign({},e)}},async handleChangeChannel(e){this.defaultValue={...this.defaultValue,channelName:e.channelName},this.formHandle[1].disabled=!this.defaultValue.ID||!e.channelName},async handleTabChange(e){const a=e.name;switch(a){case"1":this.formData[3].ifShow=!0,this.formData[4].ifShow=!0,this.formData[5].ifShow=!1,this.formData[6].ifShow=!1,this.formData[1].multiple=!1,this.formData[4].multiple=!1,await this.handleChangeCode({ID:this.defaultValue&&this.defaultValue.ID}),this.handleChangeSourceCode({sourceID:this.defaultValue&&this.defaultValue.sourceID}),this.flag++;break;case"2":this.formData[3].ifShow=!1,this.formData[4].ifShow=!0,this.formData[5].ifShow=!1,this.formData[6].ifShow=!1,this.formData[4].multiple=!0,this.formData[3].disabled=!1,this.formData[3].disabled=!1,await this.handleChangeCode({ID:this.defaultValue&&this.defaultValue.ID}),console.log(this.formData[3].name,this.formData[3].disabled),this.flag++;break;case"3":this.formData[3].ifShow=!0,this.formData[4].ifShow=!0,this.formData[5].ifShow=!0,this.formData[6].ifShow=!0,this.formData[4].multiple=!1,this.handleChangeCode({ID:this.defaultValue&&this.defaultValue.ID}),this.handleChangeSourceCode({sourceID:this.defaultValue&&this.defaultValue.sourceID}),this.flag++;break;case"4":case"5":this.formData[3].ifShow=!1,this.formData[4].ifShow=!1,this.formData[5].ifShow=!0,this.formData[6].ifShow=!1,this.handleChangeCode({ID:this.defaultValue&&this.defaultValue.ID}),this.flag++;break;default:this.formData[3].ifShow=!1,this.formData[4].ifShow=!1,this.formData[5].ifShow=!1,this.formData[6].ifShow=!1,this.handleChangeCode({ID:this.defaultValue&&this.defaultValue.ID})}},async getUpidData(e){this.timer&&clearInterval(this.timer),this.timer=setInterval(async()=>{const a=await Object(l["n"])({upid:e}).catch(()=>{this.timer&&clearInterval(this.timer)});if(a&&200===a.code){if(a.data.indexOf("error 0.8")>=0)return this.timer&&clearInterval(this.timer),void this.$message.error("所选通道相关性系数小于0.8，拒绝插补");if("正在查询"===a.data&&this.$message({message:"正在查询",type:"warning",duration:1e3}),a.data&&isObject(a.data)){this.timer&&clearInterval(this.timer);a.data;this.loading.close(),this.$message({message:"插补完成！",type:"success"})}}else this.listLoading=!1,this.timer&&clearInterval(this.timer)},1e3)},handleSubmit(e){this.listLoading=!0,this.$refs[u[this.activeName]].$refs.currencyForm.validate(async a=>{if(!a)return this.listLoading=!1,console.log("error submit!!"),!1;{const a={...e,startDate:e.queryTime&&e.queryTime.length?e.queryTime[0]:void 0,endDate:e.queryTime&&e.queryTime.length?e.queryTime[1]:void 0,sourceStartDate:e.sourceQueryTime&&e.sourceQueryTime.length?e.sourceQueryTime[0]:void 0,sourceEndDate:e.sourceQueryTime&&e.sourceQueryTime.length?e.sourceQueryTime[1]:void 0,type:Number(this.activeName)};if("4"===this.activeName||"5"===this.activeName){const a=new Date(e.queryTime[1]).getTime()-new Date(e.queryTime[0]).getTime(),t=new Date(e.sourceQueryTime[1]).getTime()-new Date(e.sourceQueryTime[0]).getTime(),i=Math.ceil(a/864e5),r=Math.ceil(t/864e5);if(r!==i)return void this.$message({message:"前后替代时间不一致！",type:"error"})}"2"===this.activeName&&(a.sourceChannelName=e.sourceChannelName&&e.sourceChannelName.join(",")),delete a.queryTime,delete a.sourceQueryTime,Object.keys(a).forEach(e=>{a[e]||delete a[e]}),this.loading=this.$loading({lock:!0,text:"插补中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.3)"});const t=await Object(o["c"])(a).catch(e=>{console.log(e),this.loading.close()});200===t.code?(this.loading.close(),this.$message({message:"插补完成！",type:"success"})):(this.$message({message:t.msg||"请求错误！",type:"error"}),this.loading.close())}this.listLoading=!1})},async handleChangeCode(e){if(this.defaultValue={...this.defaultValue,channelName:void 0,queryTime:void 0},this.$refs[u[this.activeName]].returnDisplay(this.defaultValue),!e.ID)return this.defaultValue={queryTime:[]},this.formData[1].disabled=!0,this.formData[2].disabled=!0,this.formData[3].disabled=!0,this.formData[4]&&(this.formData[4].disabled=!0),this.formData[5]&&(this.formData[5].disabled=!0),this.formData[6]&&(this.formData[6].disabled=!0),void this.$refs[u[this.activeName]].returnDisplay(this.defaultValue);const a=this;await this.getChannels(e.ID),await this.getTowerDetail(e.ID),e.ID&&this.dateRange.length&&this.dateRange[0]&&this.dateRange[1]?(this.formData[1].disabled=!1,this.formData[3].disabled=!1,this.formData[2].disabled=!1,this.formData[4]&&(this.formData[4].disabled=!1),this.formData[5]&&(this.formData[5].disabled=!1),this.formData[6]&&(this.formData[6].disabled=!1),this.formData[2].pickerOptions={disabledDate(e){return e.getTime()>new Date(a.dateRange[1].split(" ")[0]).getTime()||e.getTime()<new Date(a.dateRange[0].split(" ")[0]).getTime()},shortcuts:[{text:"恢复默认",onClick(e){const t=new Date(a.dateRange[1].split(" ")[0]),i=new Date(a.dateRange[0].split(" ")[0]);e.$emit("pick",[i,t])}}]},"1"!==this.activeName&&"3"!==this.activeName||(this.formData[3].data=this.formData[0].data.slice()),"2"===this.activeName&&this.formData[4]&&(this.formData[4].data=this.formData[1].data.slice()),this.defaultValue={...this.defaultValue,ID:e.ID,queryTime:[a.dateRange[0].split(" ")[0],a.dateRange[1].split(" ")[0]]},this.$refs[u[this.activeName]].returnDisplay(this.defaultValue)):(this.defaultValue={...this.defaultValue,queryTime:[]},this.formData[2].disabled=!0,this.formData[3].disabled=!0,this.formData[4]&&(this.formData[4].disabled=!0),this.formData[5]&&(this.formData[5].disabled=!0),this.formData[6]&&(this.formData[6].disabled=!0))},async handleChangeSourceCode(e){if(!e.sourceID)return this.formData[4]&&(this.formData[4].disabled=!0),this.formData[5]&&(this.formData[5].disabled=!0),void(this.formData[6]&&(this.formData[6].disabled=!0));const a=this;if(await this.getChannels(e.sourceID,!0),await this.getTowerDetail(e.sourceID,"source"),e.sourceID){if(this.formData[4]&&(this.formData[4].disabled=!1),"3"===this.activeName){if(!(this.sourceDateRange.length&&this.sourceDateRange[0]&&this.sourceDateRange[1]))return void this.$message({message:"插补源测风塔缺少开始结束时间数据！",type:"error"});this.formData[5]&&(this.formData[5].disabled=!1),this.formData[6]&&(this.formData[6].disabled=!1),this.formData[5]&&(this.formData[5].pickerOptions={disabledDate(e){return e.getTime()>new Date(a.sourceDateRange[1].split(" ")[0]).getTime()||e.getTime()<new Date(a.sourceDateRange[0].split(" ")[0]).getTime()},shortcuts:[{text:"恢复默认",onClick(e){const t=new Date(a.sourceDateRange[1].split(" ")[0]),i=new Date(a.sourceDateRange[0].split(" ")[0]);e.$emit("pick",[i,t])}}]}),this.defaultValue={...this.defaultValue,sourceID:e.sourceID,sourceQueryTime:[a.sourceDateRange[0].split(" ")[0],a.sourceDateRange[1].split(" ")[0]]},this.$refs[u[this.activeName]].returnDisplay(this.defaultValue)}}else this.defaultValue={...this.defaultValue,sourceID:e.sourceID,sourceQueryTime:[]},this.$refs[u[this.activeName]].returnDisplay(this.defaultValue),this.formData[4]&&(this.formData[4].disabled=!0),this.formData[5]&&(this.formData[5].disabled=!0),this.formData[6]&&(this.formData[6].disabled=!0)},getStatusMap(){},handleSelectionChange(e){this.multipleSelection=e},async handleConfirm(e){let a="";if("all"===e)a="all";else{const e=[];this.multipleSelection.map(a=>{e.push(a.warnID)}),a=e.join(",")}const t=await handleWarn({warnIDs:a});200===t.code&&this.$message({message:t.msg||"处理成功！",type:"success"})}}},d=m,h=t("2877"),c=Object(h["a"])(d,i,r,!1,null,null,null);a["default"]=c.exports},"31ed":function(e,a,t){"use strict";t.d(a,"b",(function(){return s})),t.d(a,"c",(function(){return n})),t.d(a,"d",(function(){return o})),t.d(a,"e",(function(){return l})),t.d(a,"a",(function(){return u}));var i=t("b775");window.GLOBAL_CONFIG.VUE_APP_BASE_API;const r=window.GLOBAL_CONFIG.VUE_APP_BASE_API_2;function s(e){return Object(i["a"])({url:r+"/atm/mast/showMap",method:"get",params:e})}function n(e){return Object(i["a"])({url:r+"/atm/mast/showPage",method:"post",data:e})}function o(e){return Object(i["a"])({url:r+"/atm/mast/showPageTrue",method:"post",data:e})}function l(e){return Object(i["a"])({url:r+"/atm/mast/detail",method:"post",data:e})}function u(e){return Object(i["a"])({url:r+"/atm/mast/listTrue",method:"get",params:e})}},"4c7d":function(e,a,t){"use strict";t.d(a,"b",(function(){return s})),t.d(a,"e",(function(){return n})),t.d(a,"a",(function(){return o})),t.d(a,"f",(function(){return l})),t.d(a,"d",(function(){return u})),t.d(a,"g",(function(){return m})),t.d(a,"c",(function(){return d}));var i=t("b775");const r=window.GLOBAL_CONFIG.VUE_APP_BASE_API_2;function s(e){return Object(i["a"])({url:r+"/atm/verifyTemp/mastManual",method:"get",params:e})}function n(e){return Object(i["a"])({url:r+"/atm/analysis/adjust",method:"get",params:e})}function o(e){return Object(i["a"])({url:r+"/atm/analysis/verticalExtra",method:"get",params:e})}function l(e){return Object(i["a"])({url:r+"/atm/analysis/correlation",method:"post",data:e})}function u(e){return Object(i["a"])({url:r+"/atm/analysis/oneButton",method:"post",data:e})}function m(e){return Object(i["a"])({url:r+"/atm/verify/resultShowPage",method:"post",data:e})}function d(e){return Object(i["a"])({url:r+"/atm/interpolation",method:"post",data:e})}},e50c:function(e,a,t){"use strict";t.d(a,"d",(function(){return n})),t.d(a,"s",(function(){return o})),t.d(a,"n",(function(){return l})),t.d(a,"l",(function(){return u})),t.d(a,"k",(function(){return m})),t.d(a,"a",(function(){return d})),t.d(a,"m",(function(){return h})),t.d(a,"j",(function(){return c})),t.d(a,"o",(function(){return f})),t.d(a,"i",(function(){return g})),t.d(a,"g",(function(){return D})),t.d(a,"c",(function(){return b})),t.d(a,"e",(function(){return p})),t.d(a,"t",(function(){return y})),t.d(a,"h",(function(){return w})),t.d(a,"q",(function(){return v})),t.d(a,"f",(function(){return C})),t.d(a,"p",(function(){return T})),t.d(a,"r",(function(){return I})),t.d(a,"b",(function(){return S}));var i=t("b775");const r=window.GLOBAL_CONFIG.VUE_APP_BASE_API,s=window.GLOBAL_CONFIG.VUE_APP_BASE_API_2;function n(e){return Object(i["a"])({url:r+"/atm/analysis/avgchannellist",method:"get",params:e})}function o(e){return Object(i["a"])({url:s+"/atm/analysis/timeseries",method:"get",params:e})}function l(e){return Object(i["a"])({url:s+"/atm/getUpidData",method:"get",params:e})}function u(e){return Object(i["a"])({url:r+"/atm/analysis/getrosedict",method:"get",params:e})}function m(e){return Object(i["a"])({url:s+"/atm/analysis/getrose",method:"get",params:e})}function d(e){return Object(i["a"])({url:s+"/atm/analysis/dailyanalysis",method:"get",params:e})}function h(e){return Object(i["a"])({url:s+"/atm/analysis/dailyanalysis",method:"get",params:e})}function c(e){return Object(i["a"])({url:s+"/atm/analysis/frequencyanalysis",method:"get",params:e})}function f(e){return Object(i["a"])({url:s+"/atm/analysis/yearmaxwind50",method:"get",params:e})}function g(e){return Object(i["a"])({url:s+"/atm/analysis/weibullanalysis",method:"get",params:e})}function D(e){return Object(i["a"])({url:s+"/atm/analysis/shearanalysis",method:"get",params:e})}function b(e){return Object(i["a"])({url:r+"/atm/analysis/generationdict",method:"get",params:e})}function p(e){return Object(i["a"])({url:s+"/atm/analysis/generation",method:"get",params:e})}function y(e){return Object(i["a"])({url:r+"/atm/analysis/turbulencedict",method:"get",params:e})}function w(e){return Object(i["a"])({url:s+"/atm/analysis/turbulence",method:"get",params:e})}function v(e){return Object(i["a"])({url:r+"/atm/analysis/scatterdict",method:"get",params:e})}function C(e){return Object(i["a"])({url:s+"/atm/analysis/scatter",method:"get",params:e})}function T(e){return Object(i["a"])({url:s+"/atm/channel/list",method:"get",params:e})}function I(e){return Object(i["a"])({url:s+"/atm/analysis/statistics",method:"post",data:e})}function S(e){return Object(i["a"])({url:s+"/atm/analysis/download",method:"post",data:e,responseType:"blob"})}}}]);