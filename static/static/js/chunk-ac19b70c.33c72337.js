(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ac19b70c"],{"09f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,a){const s=r(),l=e-s,o=20;let u=0;t="undefined"===typeof t?500:t;var c=function(){u+=o;var e=Math.easeInOutQuad(u,s,l,t);i(e),u<t?n(c):a&&"function"===typeof a&&a()};c()}},"31ed":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return u}));var n=a("b775");window.GLOBAL_CONFIG.VUE_APP_BASE_API;const i=window.GLOBAL_CONFIG.VUE_APP_BASE_API_2;function r(e){return Object(n["a"])({url:i+"/atm/mast/showMap",method:"get",params:e})}function s(e){return Object(n["a"])({url:i+"/atm/mast/showPage",method:"post",data:e})}function l(e){return Object(n["a"])({url:i+"/atm/mast/showPageTrue",method:"post",data:e})}function o(e){return Object(n["a"])({url:i+"/atm/mast/detail",method:"post",data:e})}function u(e){return Object(n["a"])({url:i+"/atm/mast/listTrue",method:"get",params:e})}},a919:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("CurrencyForm",{ref:"currencyForm",attrs:{"ref-name":"timeSeriesForm","form-key":0,"config-data":e.formData,"form-handle":e.formHandle,inline:!1,"set-fields-value":e.defaultValue},on:{getData:e.getData}})],1),a("div",{staticStyle:{margin:"20px"}},[a("el-button",{attrs:{type:"primary",size:"small",disabled:!e.multipleSelection.length},on:{click:e.handleConfirm}},[e._v("\n      批量处理\n  ")]),a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(t){return e.handleConfirm("all")}}},[e._v("\n      处理全部\n  ")]),a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.handleMakeup}},[e._v("\n      数据补录\n  ")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"thisTable",staticStyle:{width:"100%"},attrs:{data:e.list,height:e.tableHeight,fit:"",border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._l(e.itemsDescCodeArr,(function(t){return a("el-table-column",{key:t.dataIndex,attrs:{label:t.label,resizable:!1,align:"center","show-overflow-tooltip":"",prop:t.dataIndex,width:t.width},scopedSlots:e._u([{key:"default",fn:function(n){var i=n.row;return[a("span",[e._v(e._s(i[t.dataIndex]))])]}}],null,!0)})}))],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.pageIndex,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"pageIndex",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.getPaginationData}}),a("el-dialog",{attrs:{title:"数据补录",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose}},[a("CurrencyForm",{ref:"makeupForm",attrs:{"ref-name":"ruleMakeupForm","config-data":e.formMakeupData,"form-handle":e.formMakeupHandle,"label-width":"150px",inline:!1},on:{close:e.handleClose,submit:e.handleMakeupSubmit}})],1)],1)},i=[],r=a("31ed"),s=a("854e"),l=a("e50c"),o=a("ccce"),u=a("333d"),c={name:"HistoryWarn",components:{Pagination:u["a"],CurrencyForm:o["a"]},data(){return{key:0,list:null,total:0,listQuery:{pageIndex:1,pageSize:20,userType:"",organize:""},listLoading:!1,tableHeight:"50vh",itemsDescCodeArr:[{dataIndex:"warnID",label:"告警编号",width:"150px"},{dataIndex:"ID",label:"测风塔编号",width:"150px"},{dataIndex:"NAME",label:"测风塔名称",width:"230px"},{dataIndex:"channelID",label:"通道名称",width:"150px"},{dataIndex:"warnTime",label:"告警时间",width:"180px"},{dataIndex:"warnType",label:"告警内容"},{dataIndex:"status",label:"告警状态",width:"120px"}],dialogVisible:!1,formData:[{type:"elSelect",variable:"ID",name:"测风塔:",multiple:!1,data:[],clearable:!0,colProps:{xl:8,lg:8,md:12,sm:12,xs:24}},{type:"elInput",variable:"channelName",name:"通道名称:",clearable:!0,colProps:{xl:8,lg:8,md:12,sm:12,xs:24}},{type:"elDatePicker",variable:"queryTime",name:"时间:",valueFormat:"yyyy-MM-dd",clearable:!0,pickerType:"daterange",colProps:{xl:8,lg:8,md:12,sm:12,xs:24}},{type:"elSelect",variable:"status",name:"告警状态:",multiple:!1,clearable:!0,data:[{label:"告警中",value:"告警中"},{label:"已处理",value:"已处理"}],colProps:{xl:8,lg:8,md:12,sm:12,xs:24}}],formHandle:[{type:"primary",name:"查询",emit:"getData",colProps:{xl:8,lg:8,md:12,sm:12,xs:24}}],formMakeupData:[{type:"elDatePicker",variable:"queryTime",name:"时间:",valueFormat:"yyyy-MM-dd",clearable:!0,pickerType:"daterange",width:"300px",colProps:{xl:8,lg:8,md:12,sm:12,xs:24},required:!0}],formMakeupHandle:[{type:"primary",name:"补录",emit:"submit",colProps:{xl:8,lg:8,md:12,sm:12,xs:24}},{type:"info",name:"关闭",emit:"close",colProps:{xl:8,lg:8,md:12,sm:12,xs:24}}],title:"",defaultValue:{},channelList:null,dateRange:[],currentId:"",multipleSelection:[]}},async mounted(){this.listQuery["userType"]=this.$store.getters.roles,this.listQuery["organize"]=this.$store.getters.organize,await this.getWindTower(),this.$route.query&&this.$route.query.id?(this.currentId=this.$route.query.id,this.defaultValue.ID=this.currentId,this.$nextTick(()=>{this.$refs.currencyForm.returnDisplay(this.defaultValue),this.formData[0].disabled=!0}),await this.getList({...this.listQuery,...this.defaultValue})):this.formData[0].disabled=!1},methods:{async getTowerDetail(e){window.localStorage.setItem("ATM_CURRENT_TOWER_ID",e);const t=await Object(r["e"])({ID:e}),a=t.data;a&&a.STARTTIME&&a.ENDTIME?this.dateRange=[a.STARTTIME,a.ENDTIME]:this.dateRange=[]},async getWindTower(){const e=await Object(r["a"])({userType:this.$store.getters.roles,organize:this.$store.getters.organize});if(200===e.code){const t=e&&e.data;console.log(t),this.formData[0].data=[],Object.keys(t).forEach(e=>{this.formData[0].data.push({label:t[e],value:e})})}},async getChannels(e){this.formData[1].data=[];const t=await Object(l["p"])({ID:e,channelType:1});if(200===t.code){const e=t&&t.data;console.log(e),Object.keys(e).forEach(t=>{this.formData[1].data.push({label:e[t],value:t})})}},getData(e){this.listLoading=!0,this.$refs.currencyForm.$refs.timeSeriesForm.validate(async t=>{if(!t)return this.listLoading=!1,console.log("error submit!!"),!1;{const t={...e,...this.listQuery,startDate:e.queryTime&&e.queryTime.length?e.queryTime[0]:void 0,endDate:e.queryTime&&e.queryTime.length?e.queryTime[1]:void 0};delete t.queryTime,Object.keys(t).forEach(e=>{t[e]||delete t[e]}),await this.getList(t)}this.listLoading=!1})},async handleChangeCode(e){if(this.defaultValue={channelName:void 0,queryTime:void 0},!e.ID)return;const t=this;await this.getTowerDetail(e.ID),e.ID&&this.dateRange.length&&this.dateRange[0]&&this.dateRange[1]?(this.formData[2].disabled=!1,this.formData[2].pickerOptions={disabledDate(e){return e.getTime()>new Date(t.dateRange[1].split(" ")[0]).getTime()||e.getTime()<new Date(t.dateRange[0].split(" ")[0]).getTime()},shortcuts:[{text:"恢复默认",onClick(e){const a=new Date(t.dateRange[1].split(" ")[0]),n=new Date(t.dateRange[0].split(" ")[0]);e.$emit("pick",[n,a])}}]},this.defaultValue={queryTime:[t.dateRange[0].split(" ")[0],t.dateRange[1].split(" ")[0]]}):(this.defaultValue={queryTime:[]},this.formData[2].disabled=!0)},getStatusMap(){},getPaginationData(e){console.log(e),getList({...that.listQuery,...e})},async getList(e){const t=this,a=await Object(s["h"])(e||t.listQuery);a&&200===a.code&&(t.total=a.data.total,t.list=a.data.items),t.listLoading=!1},handleSelectionChange(e){this.multipleSelection=e,console.log(this.multipleSelection)},async handleConfirm(e){let t="";if("all"===e)t="all";else{const e=[];this.multipleSelection.map(t=>{e.push(t.warnID)}),t=e.join(",")}const a=await Object(s["g"])({warnIDs:t});200===a.code&&(this.$message({message:a.msg||"处理成功！",type:"success"}),this.getList())},handleMakeup(){this.dialogVisible=!0},handleClose(){this.dialogVisible=!1,this.getList()},async handleMakeupSubmit(e){this.$refs.makeupForm.$refs.ruleMakeupForm.validate(async t=>{if(!t)return console.log("error submit!!"),!1;{var a={startDate:e&&e.queryTime[0],endDate:e&&e.queryTime[1]};const t=await Object(s["k"])({...a});t&&200===t.code&&this.$message({message:t&&t.msg||"提交成功",type:"success"}),this.dialogVisible=!1,this.getList()}})},handleSuccess(){this.getList()}}},d=c,m=a("2877"),h=Object(m["a"])(d,n,i,!1,null,null,null);t["default"]=h.exports},e50c:function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"s",(function(){return l})),a.d(t,"n",(function(){return o})),a.d(t,"l",(function(){return u})),a.d(t,"k",(function(){return c})),a.d(t,"a",(function(){return d})),a.d(t,"m",(function(){return m})),a.d(t,"j",(function(){return h})),a.d(t,"o",(function(){return p})),a.d(t,"i",(function(){return g})),a.d(t,"g",(function(){return f})),a.d(t,"c",(function(){return y})),a.d(t,"e",(function(){return b})),a.d(t,"t",(function(){return w})),a.d(t,"h",(function(){return T})),a.d(t,"q",(function(){return D})),a.d(t,"f",(function(){return O})),a.d(t,"p",(function(){return v})),a.d(t,"r",(function(){return I})),a.d(t,"b",(function(){return x}));var n=a("b775");const i=window.GLOBAL_CONFIG.VUE_APP_BASE_API,r=window.GLOBAL_CONFIG.VUE_APP_BASE_API_2;function s(e){return Object(n["a"])({url:i+"/atm/analysis/avgchannellist",method:"get",params:e})}function l(e){return Object(n["a"])({url:r+"/atm/analysis/timeseries",method:"get",params:e})}function o(e){return Object(n["a"])({url:r+"/atm/getUpidData",method:"get",params:e})}function u(e){return Object(n["a"])({url:i+"/atm/analysis/getrosedict",method:"get",params:e})}function c(e){return Object(n["a"])({url:r+"/atm/analysis/getrose",method:"get",params:e})}function d(e){return Object(n["a"])({url:r+"/atm/analysis/dailyanalysis",method:"get",params:e})}function m(e){return Object(n["a"])({url:r+"/atm/analysis/dailyanalysis",method:"get",params:e})}function h(e){return Object(n["a"])({url:r+"/atm/analysis/frequencyanalysis",method:"get",params:e})}function p(e){return Object(n["a"])({url:r+"/atm/analysis/yearmaxwind50",method:"get",params:e})}function g(e){return Object(n["a"])({url:r+"/atm/analysis/weibullanalysis",method:"get",params:e})}function f(e){return Object(n["a"])({url:r+"/atm/analysis/shearanalysis",method:"get",params:e})}function y(e){return Object(n["a"])({url:i+"/atm/analysis/generationdict",method:"get",params:e})}function b(e){return Object(n["a"])({url:r+"/atm/analysis/generation",method:"get",params:e})}function w(e){return Object(n["a"])({url:i+"/atm/analysis/turbulencedict",method:"get",params:e})}function T(e){return Object(n["a"])({url:r+"/atm/analysis/turbulence",method:"get",params:e})}function D(e){return Object(n["a"])({url:i+"/atm/analysis/scatterdict",method:"get",params:e})}function O(e){return Object(n["a"])({url:r+"/atm/analysis/scatter",method:"get",params:e})}function v(e){return Object(n["a"])({url:r+"/atm/channel/list",method:"get",params:e})}function I(e){return Object(n["a"])({url:r+"/atm/analysis/statistics",method:"post",data:e})}function x(e){return Object(n["a"])({url:r+"/atm/analysis/download",method:"post",data:e,responseType:"blob"})}}}]);