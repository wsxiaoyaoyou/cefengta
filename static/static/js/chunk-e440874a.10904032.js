(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e440874a"],{"09f4":function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),Math.easeInOutQuad=function(e,t,i,a){return e/=a/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function s(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function n(e,t,i){const n=l(),r=e-n,o=20;let c=0;t="undefined"===typeof t?500:t;var u=function(){c+=o;var e=Math.easeInOutQuad(c,n,r,t);s(e),c<t?a(u):i&&"function"===typeof i&&i()};u()}},4427:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入告警模板名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.TEMPLATE,callback:function(t){e.$set(e.listQuery,"TEMPLATE",t)},expression:"listQuery.TEMPLATE"}}),i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入告警模板编号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.ID,callback:function(t){e.$set(e.listQuery,"ID",t)},expression:"listQuery.ID"}}),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("\n      查询\n    ")]),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("\n      新增告警模板\n    ")])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"thisTable",staticStyle:{width:"100%"},attrs:{data:e.list,height:e.tableHeight,fit:"",border:"",stripe:""}},[e._l(e.itemsDescCodeArr,(function(t){return i("el-table-column",{key:t,attrs:{label:e.itemsDescObj[t],resizable:!1,align:"center","show-overflow-tooltip":"",prop:t},scopedSlots:e._u([{key:"default",fn:function(a){return[i("span",[e._v(e._s(a.row[t]))])]}}],null,!0)})})),i("el-table-column",{attrs:{label:"操作",width:"200px",align:"center",fixed:"right",resizable:!1},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.handleEdit(t.row)}}},[e._v("编辑")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],2),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.pageIndex,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"pageIndex",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.getList}}),i("el-dialog",{attrs:{title:"告警模板",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose}},[i("CurrencyForm",{ref:"currencyForm",attrs:{"ref-name":"ruleTemplateForm","config-data":e.formData,"form-handle":e.formHandle,"label-width":"150px",inline:!1},on:{close:e.handleClose,submit:e.handleSubmit}})],1)],1)},s=[],l=i("2f62"),n=i("ccce"),r=i("854e"),o=i("333d"),c={name:"WarnTemplateList",components:{Pagination:o["a"],CurrencyForm:n["a"]},data(){return{key:0,list:null,total:0,listQuery:{pageIndex:1,pageSize:20,TEMPLATE:void 0,ID:void 0},headAjaxTimer:null,dialogVisible:!1,checkboxList:[],tmpCheckboxList:[],listLoading:!1,tableHeight:"78vh",driverOptions:[{value:"ALL",label:"全部"}],currHeader:"",driverId:"ALL",itemsDescObj:{ID:"模板编号",TEMPLATE:"模板名称",TULES_ID:"组合告警名称"},itemsDescCodeArr:["ID","TEMPLATE","TULES_ID"],formData:[{type:"elInput",variable:"ID",name:"模板编号:",colProps:{xl:12,lg:12,md:12},disabled:!1,rules:[{required:!0,message:"请输入模板编号",trigger:"blur"}]},{type:"elInput",variable:"TEMPLATE",name:"模板名称:",colProps:{xl:12,lg:12,md:12},rules:[{required:!0,message:"通道编号",trigger:"blur"}]},{type:"elSelect",variable:"TULES_ID",name:"组合告警:",multiple:!0,colProps:{xl:12,lg:12,md:12},rules:[{required:!0,message:"请选择告警",trigger:["blur","change"]}]}],formHandle:[{type:"info",name:"关闭",emit:"close",colProps:{offset:10}},{type:"primary",name:"保存",emit:"submit",colProps:{offset:10}}],defaultValue:{ID:1},visible:!1,isUpdate:!1}},computed:{...Object(l["b"])(["currPath","currStationPathId"])},mounted(){this.getList()},beforeDestroy:function(){this.timer&&clearInterval(this.timer),this.headAjaxTimer&&clearInterval(this.headAjaxTimer)},methods:{async getList(){const e=this;Object.keys(this.listQuery).map(e=>{this.listQuery[e]||delete this.listQuery[e]});const t=await Object(r["m"])(e.listQuery);t&&200===t.code&&(e.total=t.data.total,e.list=t.data.items),e.listLoading=!1},async getRuleList(){const e=await Object(r["l"])({pageIndex:1,pageSize:9999});if(200===e.code){const t=e&&e.data.items;this.formData[2].data=[],t.forEach(e=>{this.formData[2].data.push({label:e.NAME+e.ID,value:e.ID})})}},handleFilter(){this.getList()},async handleStateChange(e,t){console.log(e,t);const i=await Object(r["bindCleanTempMast"])({ID:t,STATE:e});i&&200===i.code&&this.$message({message:i&&i.msg||"提交成功",type:"success"}),this.getList()},async handleAdd(){await this.getRuleList(),this.isUpdate=!1,this.defaultValue={},this.dialogVisible=!0,this.$nextTick(()=>{this.formData[0].disabled=!1,this.$refs.currencyForm.returnDisplay(this.defaultValue)})},async handleEdit(e){await this.getRuleList(),this.isUpdate=!0,this.dialogVisible=!0,this.$nextTick(()=>{this.formData[0].disabled=!0;const t={...e,TULES_ID:e&&e.TULES_ID.split(",")||[]};this.$refs.currencyForm.returnDisplay(t)})},async handleDelete(e){const t=await Object(r["c"])({ID:e.ID});t&&200===t.code&&this.$message({message:t&&t.msg||"已删除",type:"success"}),this.getList()},handleClose(){this.dialogVisible=!1,this.getList()},async handleSubmit(e){this.$refs.currencyForm.$refs.ruleTemplateForm.validate(async t=>{if(!t)return console.log("error submit!!"),!1;{var i={ID:e&&String(e.ID),TEMPLATE:e&&e.TEMPLATE,TULES_ID:e&&e.TULES_ID.join(",")||""};const t=this.isUpdate?await Object(r["e"])({...i}):await Object(r["j"])({...i});t&&200===t.code&&this.$message({message:t&&t.msg||"提交成功",type:"success"}),this.dialogVisible=!1,this.getList()}})}}},u=c,d=i("2877"),m=Object(d["a"])(u,a,s,!1,null,null,null);t["default"]=m.exports}}]);