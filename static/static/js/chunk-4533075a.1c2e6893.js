(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4533075a"],{"09f4":function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),Math.easeInOutQuad=function(t,e,a,n){return t/=n/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function r(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function i(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(t,e,a){const s=i(),o=t-s,u=20;let l=0;e="undefined"===typeof e?500:e;var c=function(){l+=u;var t=Math.easeInOutQuad(l,s,o,e);r(t),l<e?n(c):a&&"function"===typeof a&&a()};c()}},"31ed":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"d",(function(){return o})),a.d(e,"e",(function(){return u})),a.d(e,"a",(function(){return l}));var n=a("b775");window.GLOBAL_CONFIG.VUE_APP_BASE_API;const r=window.GLOBAL_CONFIG.VUE_APP_BASE_API_2;function i(t){return Object(n["a"])({url:r+"/atm/mast/showMap",method:"get",params:t})}function s(t){return Object(n["a"])({url:r+"/atm/mast/showPage",method:"post",data:t})}function o(t){return Object(n["a"])({url:r+"/atm/mast/showPageTrue",method:"post",data:t})}function u(t){return Object(n["a"])({url:r+"/atm/mast/detail",method:"post",data:t})}function l(t){return Object(n["a"])({url:r+"/atm/mast/listTrue",method:"get",params:t})}},"4c7d":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"e",(function(){return s})),a.d(e,"a",(function(){return o})),a.d(e,"f",(function(){return u})),a.d(e,"d",(function(){return l})),a.d(e,"g",(function(){return c})),a.d(e,"c",(function(){return d}));var n=a("b775");const r=window.GLOBAL_CONFIG.VUE_APP_BASE_API_2;function i(t){return Object(n["a"])({url:r+"/atm/verifyTemp/mastManual",method:"get",params:t})}function s(t){return Object(n["a"])({url:r+"/atm/analysis/adjust",method:"get",params:t})}function o(t){return Object(n["a"])({url:r+"/atm/analysis/verticalExtra",method:"get",params:t})}function u(t){return Object(n["a"])({url:r+"/atm/analysis/correlation",method:"post",data:t})}function l(t){return Object(n["a"])({url:r+"/atm/analysis/oneButton",method:"post",data:t})}function c(t){return Object(n["a"])({url:r+"/atm/verify/resultShowPage",method:"post",data:t})}function d(t){return Object(n["a"])({url:r+"/atm/interpolation",method:"post",data:t})}},e50c:function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"s",(function(){return o})),a.d(e,"n",(function(){return u})),a.d(e,"l",(function(){return l})),a.d(e,"k",(function(){return c})),a.d(e,"a",(function(){return d})),a.d(e,"m",(function(){return m})),a.d(e,"j",(function(){return f})),a.d(e,"o",(function(){return h})),a.d(e,"i",(function(){return g})),a.d(e,"g",(function(){return p})),a.d(e,"c",(function(){return y})),a.d(e,"e",(function(){return b})),a.d(e,"t",(function(){return w})),a.d(e,"h",(function(){return O})),a.d(e,"q",(function(){return T})),a.d(e,"f",(function(){return j})),a.d(e,"p",(function(){return D})),a.d(e,"r",(function(){return I})),a.d(e,"b",(function(){return _}));var n=a("b775");const r=window.GLOBAL_CONFIG.VUE_APP_BASE_API,i=window.GLOBAL_CONFIG.VUE_APP_BASE_API_2;function s(t){return Object(n["a"])({url:r+"/atm/analysis/avgchannellist",method:"get",params:t})}function o(t){return Object(n["a"])({url:i+"/atm/analysis/timeseries",method:"get",params:t})}function u(t){return Object(n["a"])({url:i+"/atm/getUpidData",method:"get",params:t})}function l(t){return Object(n["a"])({url:r+"/atm/analysis/getrosedict",method:"get",params:t})}function c(t){return Object(n["a"])({url:i+"/atm/analysis/getrose",method:"get",params:t})}function d(t){return Object(n["a"])({url:i+"/atm/analysis/dailyanalysis",method:"get",params:t})}function m(t){return Object(n["a"])({url:i+"/atm/analysis/dailyanalysis",method:"get",params:t})}function f(t){return Object(n["a"])({url:i+"/atm/analysis/frequencyanalysis",method:"get",params:t})}function h(t){return Object(n["a"])({url:i+"/atm/analysis/yearmaxwind50",method:"get",params:t})}function g(t){return Object(n["a"])({url:i+"/atm/analysis/weibullanalysis",method:"get",params:t})}function p(t){return Object(n["a"])({url:i+"/atm/analysis/shearanalysis",method:"get",params:t})}function y(t){return Object(n["a"])({url:r+"/atm/analysis/generationdict",method:"get",params:t})}function b(t){return Object(n["a"])({url:i+"/atm/analysis/generation",method:"get",params:t})}function w(t){return Object(n["a"])({url:r+"/atm/analysis/turbulencedict",method:"get",params:t})}function O(t){return Object(n["a"])({url:i+"/atm/analysis/turbulence",method:"get",params:t})}function T(t){return Object(n["a"])({url:r+"/atm/analysis/scatterdict",method:"get",params:t})}function j(t){return Object(n["a"])({url:i+"/atm/analysis/scatter",method:"get",params:t})}function D(t){return Object(n["a"])({url:i+"/atm/channel/list",method:"get",params:t})}function I(t){return Object(n["a"])({url:i+"/atm/analysis/statistics",method:"post",data:t})}function _(t){return Object(n["a"])({url:i+"/atm/analysis/download",method:"post",data:t,responseType:"blob"})}},f10a:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("CurrencyForm",{ref:"currencyForm",attrs:{"ref-name":"shadowForm",labelWidth:"200px","form-key":0,"config-data":t.formData,"form-handle":t.formHandle,inline:!1,"set-fields-value":t.defaultValue},on:{changeCode:t.handleChangeCode,changeChannel:t.handleChangeChannel,getData:t.getData}})],1)])},r=[],i=a("31ed"),s=a("4c7d"),o=a("e50c"),u=a("ccce"),l=a("333d"),c={name:"DataExtrapolation",components:{Pagination:l["a"],CurrencyForm:u["a"]},data(){return{key:0,list:null,total:0,listLoading:!1,dialogVisible:!1,formData:[{type:"elSelect",variable:"ID",name:"测风塔:",multiple:!1,data:[],clearable:!0,colProps:{xl:8,lg:8,md:12,sm:12,xs:24},required:!0,rules:[{required:!0,message:"请选择测风塔",trigger:"blur"}],emit:"changeCode"},{type:"elSelect",variable:"type",name:"外推参考通道:",multiple:!0,data:[],width:"100%",colProps:{xl:8,lg:8,md:12,sm:12,xs:24},required:!0,rules:[{required:!0,message:"请选择外推参考通道",trigger:"blur"}],disabled:!0,emit:"changeChannel"},{type:"elDatePicker",variable:"queryTime",name:"时间:",valueFormat:"yyyy-MM-dd",clearable:!0,pickerType:"daterange",colProps:{xl:8,lg:8,md:12,sm:12,xs:24},required:!0,rules:[{required:!0,message:"请选择时间",trigger:"blur"}],disabled:!0},{type:"elInputNumber",variable:"HEIGHT",name:"垂直外推高度:",controlsPosition:"right",min:0,colProps:{xl:8,lg:8,md:12,sm:12,xs:24},required:!0,disabled:!0,rules:[{required:!0,message:"请输入垂直外推高度",trigger:"blur"}]}],formHandle:[{type:"primary",name:"垂直外推",emit:"getData",colProps:{xl:8,lg:8,md:12,sm:12,xs:24}}],title:"",defaultValue:{},defaultMakeupValue:{},channelList:null,channelHeightMap:[],dateRange:[],shadowAnalysisTitle:"",shadowAnalysisShow:!1,multipleSelection:[]}},async mounted(){await this.getWindTower()},methods:{async getTowerDetail(t){window.localStorage.setItem("ATM_CURRENT_TOWER_ID",t);const e=await Object(i["e"])({ID:t}),a=e.data;a&&a.STARTTIME&&a.ENDTIME?this.dateRange=[a.STARTTIME,a.ENDTIME]:this.dateRange=[]},async getWindTower(){const t=await Object(i["a"])({userType:this.$store.getters.roles,organize:this.$store.getters.organize});if(200===t.code){const e=t&&t.data;console.log(e),this.formData[0].data=[],Object.keys(e).forEach(t=>{this.formData[0].data.push({label:e[t],value:t})})}},async getChannels(t,e){return new Promise(async(a,n)=>{try{const r=await Object(o["p"])({ID:t,channelType:e});if(200===r.code){const t=r&&r.data;a(t)}else n(0)}catch(r){n(r.message)}})},async handleChangeChannel(t){this.defaultValue={...this.defaultValue,channelName:t.channelName},this.formHandle[1].disabled=!this.defaultValue.ID||!t.channelName},getData(t){this.listLoading=!0,this.$refs.currencyForm.$refs.shadowForm.validate(async e=>{if(!e)return this.listLoading=!1,console.log("error submit!!"),!1;{if(this.channelHeightMap.includes(String(t.HEIGHT)))return void this.$message({message:"不能与已有风速通道高度相同！",type:"warning"});const e={...t,startDate:t.queryTime&&t.queryTime.length?t.queryTime[0]:void 0,endDate:t.queryTime&&t.queryTime.length?t.queryTime[1]:void 0,type:t.type&&t.type.join(",")};delete e.queryTime,Object.keys(e).forEach(t=>{e[t]||delete e[t]});const a=await Object(s["a"])(e);200===a.code&&this.$message({message:a.msg||"处理成功！",type:"success"})}this.listLoading=!1})},async handleChangeCode(t){if(this.defaultValue={...this.defaultValue,channelName:void 0,queryTime:void 0},!t.ID)return;const e=this;this.formData[1].data=[];const a=await this.getChannels(t.ID,2);console.log(a),this.formData[1].disabled=!1,Object.keys(a).forEach(t=>{e.formData[1].data.push({label:a[t],value:t})});const n=await this.getChannels(t.ID,3);Object.keys(n).forEach(t=>{e.channelHeightMap.push(t.substring(0,t.indexOf("_WD_AVG")))}),await this.getTowerDetail(t.ID),t.ID&&this.dateRange.length&&this.dateRange[0]&&this.dateRange[1]?(this.formData[3].disabled=!1,this.formData[2].disabled=!1,this.formData[2].pickerOptions={disabledDate(t){return t.getTime()>new Date(e.dateRange[1].split(" ")[0]).getTime()||t.getTime()<new Date(e.dateRange[0].split(" ")[0]).getTime()},shortcuts:[{text:"恢复默认",onClick(t){const a=new Date(e.dateRange[1].split(" ")[0]),n=new Date(e.dateRange[0].split(" ")[0]);t.$emit("pick",[n,a])}}]},this.defaultValue={...this.defaultValue,ID:t.ID,queryTime:[e.dateRange[0].split(" ")[0],e.dateRange[1].split(" ")[0]]}):(this.defaultValue={...this.defaultValue,queryTime:[]},this.formData[2].disabled=!0)}}},d=c,m=a("2877"),f=Object(m["a"])(d,n,r,!1,null,null,null);e["default"]=f.exports}}]);