(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1885e3d4"],{"0468":function(e,t,a){},"2c46":function(e,t,a){},3703:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-upload",{ref:"upload",attrs:{limit:e.limit,multiple:e.multiple,accept:e.fileType,"auto-upload":!1,"file-list":e.fileList,action:"",drag:e.drag,disabled:e.isUploading||e.disabled,"on-remove":e.handleFileRemove,"on-change":e.handleUpload,"on-progress":e.handleFileUploadProgress}},[a("div",[e.drag?a("div",[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击")])])]):a("el-button",{attrs:{slot:"trigger",disabled:e.disabled,loading:e.isUploading,size:"small",type:"primary"},slot:"trigger"},[e._v(e._s(e.btnText))])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.hasTip,expression:"hasTip"}],staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[a("el-alert",{attrs:{title:"请选择"+e.fileType+"格式的文件",type:"warning","show-icon":"",closable:!1}}),a("el-alert",{staticStyle:{"margin-top":"10px"},attrs:{title:e.tipText,type:"warning","show-icon":"",closable:!1}})],1)])},i=[],s={name:"UploadFile",props:{fileCode:{type:String,required:!0},fileType:{type:String,required:!0},fileSize:{type:Number,default:50},limit:{type:Number,default:void 0},hasTip:{type:Boolean,default:!0},tipText:{type:String,default:""},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},drag:{type:Boolean,default:!1},btnText:{type:String,default:"选取文件"},fileList:{type:Array,default:()=>[]}},data(){return{fileForm:{},isUploading:!1}},methods:{handleBeforeUpload(e){if(this.fileType){let t="";e.name.lastIndexOf(".")>-1&&(t="."+e.name.slice(e.name.lastIndexOf(".")+1));const a=this.fileType.split(",").some(a=>e.type.indexOf(a)>-1||(!!(t&&t.indexOf(a)>-1)||void 0));return!!a||(this.$message.error(`文件格式不正确, 请上传“ ${this.fileType} ”格式文件!`),!1)}},handleFileSize(e){if(this.fileSize){const t=e.size/1024/1024<this.fileSize;if(!t)return this.$message.error(`上传文件大小不能超过 ${this.fileSize} MB！`),!1}return!0},handleUpload(e,t){this.handleBeforeUpload(e.raw)&&this.handleFileSize(e.raw)&&this.$emit("file-success",e,t)},handleFileRemove(e,t){this.isUploading=!1,this.$emit("file-remove",e,t)},handleFileUploadProgress(e){console.log("上传中",e),this.isUploading=!0},handleClear(){this.$refs.upload.clearFiles()}}},n=s,r=a("2877"),o=Object(r["a"])(n,l,i,!1,null,null,null);t["a"]=o.exports},"856b":function(e,t,a){"use strict";a("0468")},"971e":function(e,t,a){},c33c:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"form-wrapper"},[a("el-steps",{staticClass:"step-content",attrs:{active:e.active,"finish-status":"success","align-center":"","process-status":"finish"}},[a("el-step",{attrs:{title:"基本信息"}}),a("el-step",{attrs:{title:"规则模板设置"}}),a("el-step",{attrs:{title:"数据上传"}}),a("el-step",{attrs:{title:"通道配置"}}),a("el-step",{attrs:{title:"数据入库"}})],1),a("div",{staticClass:"block"},[0===e.active?a("step-first",{attrs:{"default-value":e.firstForm,"is-step":!0,"is-update":e.isUpdate},on:{"next-step":e.nextStep}}):e._e(),1===e.active?a("step-second",{attrs:{"reset-data":e.secondForm},on:{"prev-step":e.prevStep,"next-step":e.nextStep}}):e._e(),2===e.active?a("step-third",{attrs:{"reset-data":e.thirdForm},on:{"prev-step":e.prevStep,"next-step":e.nextStep}}):e._e(),3===e.active?a("step-fourth",{attrs:{"reset-data":e.fourthForm},on:{"prev-step":e.prevStep,"next-step":e.nextStep}}):e._e(),4===e.active?a("step-success",{attrs:{"reset-data":e.successForm}}):e._e()],1)],1)])},i=[],s=a("b37e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container",staticStyle:{"max-width":"900px",margin:"0 auto"}},[a("CurrencyForm",{ref:"currencyForm",attrs:{"ref-name":"insertTowerFormSecond","config-data":e.formData,"label-width":"150px",inline:!1}}),a("h4",{staticStyle:{color:"#909399"}},[e._v("选择清洗规则模板")]),a("el-table",{ref:"ruleTemplateTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark","highlight-current-row":""},on:{"current-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"55"}}),a("el-table-column",{attrs:{label:"模板编号",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.ID))]}}])}),a("el-table-column",{attrs:{prop:"TEMPLATE",label:"模板名称",width:"180"}}),a("el-table-column",{attrs:{prop:"RULES_ID",label:"规则组合",width:"180"}}),a("el-table-column",{attrs:{prop:"STATE",label:"状态"}})],1),a("el-divider"),e.resetData&&1==e.resetData.DATATYPE?a("div",[a("h4",{staticStyle:{color:"#909399"}},[e._v("选择告警规则模板")]),a("el-table",{ref:"warnTemplateTable",staticStyle:{width:"100%"},attrs:{data:e.tableWarnData,"tooltip-effect":"dark","highlight-current-row":""},on:{"current-change":e.handleWarnChange}},[a("el-table-column",{attrs:{type:"index",width:"55"}}),a("el-table-column",{attrs:{label:"模板编号",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.ID))]}}],null,!1,139917232)}),a("el-table-column",{attrs:{prop:"TEMPLATE",label:"模板名称",width:"180"}}),a("el-table-column",{attrs:{prop:"TULES_ID",label:"规则组合"}})],1)],1):e._e(),a("div",{staticStyle:{margin:"16px 0",display:"flex","justify-content":"center"}},[a("el-button",{attrs:{type:"info",size:"small"},on:{click:e.handlePrev}},[e._v("\n      上一步\n    ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleNext}},[e._v("\n      保存下一步\n    ")])],1)],1)},r=[],o=a("ccce"),c=a("eb91"),p={name:"StepSecond",components:{CurrencyForm:o["a"]},props:{resetData:{type:Object,default:()=>({ID:"",DATATYPE:0})}},data(){return{formData:[{type:"elInput",variable:"ID",name:"编号:",colProps:{xl:8,lg:8,md:12},disabled:!0},{type:"elInput",variable:"NAME",name:"名称:",colProps:{xl:8,lg:8,md:12},disabled:!0}],defaultValue:{ID:"",NAME:"",EQUIPTYPE:""},listLoading:!1,tableData:[],multipleSelection:[],tableWarnData:[],warnSelection:[],tableWarnParams:{pageIndex:1,pageSize:10}}},async mounted(){console.log(this.resetData),this.$nextTick(async()=>{this.resetData&&this.resetData.ID?(this.defaultValue.ID=this.resetData.ID||"",this.defaultValue.NAME=this.resetData.NAME,this.$refs.currencyForm.returnDisplay(this.defaultValue),await this.getTemplateList(),await this.getWarnTemplateList()):this.$message({message:"缺少关键数据！",type:"error"})})},methods:{handleSelectionChange(e){console.log(e),this.multipleSelection=[e]},handleWarnChange(e){console.log(e),this.warnSelection=[e]},async getTemplateList(){const e=await Object(c["s"])({pageIndex:1,pageSize:9999});if(200===e.code){this.multipleSelection=[];const t=e.data;if(console.log(t),this.tableData=t.items,this.tableData.length)for(let e=0;e<this.tableData.length;e++)if("正常"===this.tableData[e].STATE)return this.multipleSelection.push(this.tableData[e]),void this.$refs.ruleTemplateTable.setCurrentRow(this.tableData[e])}},async getWarnTemplateList(){const e=await Object(c["k"])(this.tableWarnParams);if(200===e.code){this.warnSelection=[];const t=e&&e.data;this.tableWarnData=t&&t.items}},handlePrev(){this.$emit("prev-step","second",this.resetData)},async handleNext(){if(!this.multipleSelection||!Object.keys(this.multipleSelection).length)return void this.$message({message:"请选择至少一个规则模板！",type:"error"});const e=[];if(this.multipleSelection.length&&this.multipleSelection.map(t=>{e.push(t.ID)}),1==this.resetData.DATATYPE){if(!this.warnSelection||!Object.keys(this.warnSelection).length)return void this.$message({message:"请选择至少一个告警模板！",type:"error"});const e=[];this.warnSelection.length&&this.warnSelection.map(t=>{e.push(t.ID)}),await Object(c["t"])({warnTempID:e.join(","),ID:this.defaultValue.ID})}const t=await Object(c["b"])({ID:this.defaultValue.ID,TEMPLATE_ID:!!e.length&&e.join(",")||""});if(!t||200!==t.code)return console.log("error submit!!"),!1;this.$emit("next-step","second",this.resetData)}}},d=p,h=a("2877"),u=Object(h["a"])(d,n,r,!1,null,null,null),m=u.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("upload-file",{staticClass:"upload-file-wrapper",attrs:{"file-code":"Contract","file-type":".csv,.CSV,.txt,.TXT,.rld,.RLD,.rwd,.RWD,.ndf,.NDF,.zip,.ZIP,.rar,.RAR,.dat,.DAT,.wnd,.WND",drag:!0,limit:10,multiple:!0,"tip-text":"文件上传数量上限为10个，批量文件请通过压缩包上传","before-upload":e.beforeUpload},on:{"file-success":e.handleFileSuccess,"file-remove":e.handleFileRemove},model:{value:e.form.multipartFile,callback:function(t){e.$set(e.form,"multipartFile",t)},expression:"form.multipartFile"}},[a("span",{attrs:{slot:"filename"},slot:"filename"},[e._v(e._s(e.multipartFileName))])]),a("div",{staticStyle:{margin:"16px 0",display:"flex","justify-content":"center"}},[a("el-button",{attrs:{type:"info",size:"small"},on:{click:e.handlePrev}},[e._v("\n      上一步\n    ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleNext}},[e._v("\n      提交并下一步\n    ")])],1)],1)},f=[],v=a("3703"),y={name:"StepThird",components:{UploadFile:v["a"]},props:{resetData:{type:Object,required:!0}},data(){return{form:{multipartFile:null},multipartFileName:"",fileList:[],tableData:[],tableHeader:[{dataIndex:"ID",title:"测风塔编号"},{dataIndex:"CHID",title:"通道编号"},{dataIndex:"ORIGINCHANNEL",title:"原始通道名称"}],dictObjMap:{channelnametype:{WS:"风速",ZWS:"Z向风速",REL:"可靠性",WD:"风向",T:"气温",P:"气压",V:"电池",RH:"湿度",time:"时间"},type:{AVG:"均值",MAX:"最大值",MIN:"最小值",SD:"标准差",other:"其他"},unit:{ms:"m/s",angle:"°",temp:"℃",kpa:"kPa",hPa:"hPa",mb:"mb",mmHg:"mmHg",v:"V",rh:"%",quality:"%"}},dictOptionsMap:{channelnametype:[{value:"WS",label:"风速"},{value:"ZWS",label:"Z向风速"},{value:"REL",label:"可靠性"},{value:"WD",label:"风向"},{value:"T",label:"气温"},{value:"P",label:"气压"},{value:"V",label:"电池"},{value:"RH",label:"湿度"},{value:"time",label:"时间"}],type:[{label:"AVG",value:"均值"},{label:"MAX",value:"最大值"},{label:"MIN",value:"最小值"},{label:"SD",value:"标准差"},{label:"other",value:"其他"}],unit:[{label:"ms",value:"m/s"},{label:"angle",value:"°"},{label:"temp",value:"℃"},{label:"kpa",value:"kPa"},{label:"hPa",value:"hPa"},{label:"mb",value:"mb"},{label:"mmHg",value:"mmHg"},{label:"v",value:"V"},{label:"rh",value:"%"},{label:"quality",value:"%"}]},tableHeight:0}},created(){this.tableHeight=document.body.clientHeight-500},methods:{beforeUpload(e){const t=e.size/1024/1024*50<1;return!!t||(this.$message({message:"上传文件需小于10MB",type:"warning"}),!1)},handleFileRemove(){this.multipartFileName="",this.form.multipartFile=null},async handleFileSuccess(e,t){this.fileList=t},async getDataDict(){const e=await Object(c["e"])();200===e.code&&(this.dictObjMap=e&&e.data,Object.keys(this.dictObjMap.channelnametype).forEach(e=>{this.dictOptionsMap.channelnametype.push({label:this.dictObjMap.channelnametype[e],value:e})}),Object.keys(this.dictObjMap.type).forEach(e=>{this.dictOptionsMap.type.push({label:this.dictObjMap.type[e],value:e})}),Object.keys(this.dictObjMap.unit).forEach(e=>{this.dictOptionsMap.unit.push({label:this.dictObjMap.unit[e],value:e})}))},handlePrev(){this.$emit("prev-step","third",this.resetData)},async handleNext(){if(console.log("third",this.fileList),this.fileList&&this.fileList.length){var e=new FormData;for(let a=0;a<this.fileList.length;a++)e.append(`file[${a}]`,this.fileList[a].raw);e.append("ID",this.resetData&&this.resetData.ID);const t=await Object(c["y"])(e);t&&200===t.code&&(this.$message({message:"导入成功",type:"success"}),this.$emit("next-step","third",this.resetData))}}}},g=y,D=(a("856b"),Object(h["a"])(g,b,f,!1,null,"14d2144a",null)),T=D.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,height:e.tableHeight,border:"","highlight-current-row":""}},[e._l(e.tableHeader,(function(e){return a("el-table-column",{key:e.dataIndex,attrs:{"min-width":"150px",prop:e.dataIndex,label:e.title}})})),a("el-table-column",{attrs:{"min-width":"180px",label:"通道类型"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[l.edit?[a("el-select",{attrs:{placeholder:"请选择通道类型"},model:{value:l.CHANNELNAMETYPE,callback:function(t){e.$set(l,"CHANNELNAMETYPE",t)},expression:"row.CHANNELNAMETYPE"}},e._l(e.dictOptionsMap.channelnametype,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]:a("span",[e._v(e._s(l.CHANNELNAMETYPE&&e.dictObjMap.channelnametype[l.CHANNELNAMETYPE]))])]}}])}),a("el-table-column",{attrs:{"min-width":"150px",label:"数据类型"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[l.edit?[a("el-select",{attrs:{placeholder:"请选择数据类型"},model:{value:l.type,callback:function(t){e.$set(l,"type",t)},expression:"row.type"}},e._l(e.dictOptionsMap.type,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]:a("span",[e._v(e._s(l.type&&e.dictObjMap.type[l.type]))])]}}])}),a("el-table-column",{attrs:{"min-width":"120px",label:"观测高度"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[l.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:l.HIGHT,callback:function(t){e.$set(l,"HIGHT",t)},expression:"row.HIGHT"}})]:a("span",[e._v(e._s(l.HIGHT))])]}}])}),a("el-table-column",{attrs:{"min-width":"120px",label:"单位"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[l.edit?[a("el-select",{attrs:{placeholder:"请选择单位"},model:{value:l.UNIT,callback:function(t){e.$set(l,"UNIT",t)},expression:"row.UNIT"}},e._l(e.dictOptionsMap.unit,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]:a("span",[e._v(e._s(l.UNIT&&e.dictObjMap.unit[l.UNIT]))])]}}])}),a("el-table-column",{attrs:{"min-width":"120px",label:"偏移量"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[l.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:l.OFF,callback:function(t){e.$set(l,"OFF",t)},expression:"row.OFF"}})]:a("span",[e._v(e._s(l.OFF))])]}}])}),a("el-table-column",{attrs:{"min-width":"120px",label:"尺度因子"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[l.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:l.SCALE,callback:function(t){e.$set(l,"SCALE",t)},expression:"row.SCALE"}})]:a("span",[e._v(e._s(l.SCALE))])]}}])}),a("el-table-column",{attrs:{width:"150px",label:"操作",fixed:"right",resizable:!1},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[l.edit?[a("el-button",{staticClass:"cancel-btn",staticStyle:{color:"#ffba00"},attrs:{size:"small",icon:"el-icon-refresh",type:"text"},on:{click:function(t){return e.cancelEdit(l)}}},[e._v("\n            取消\n          ")]),a("el-button",{staticStyle:{color:"#13ce66"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.confirmEdit(l)}}},[e._v("\n            确认\n          ")])]:a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){l.edit=!l.edit}}},[e._v("\n          编辑\n          ")])]}}])})],2),a("div",{staticStyle:{margin:"16px 0",display:"flex","justify-content":"center"}},[a("el-button",{attrs:{type:"info",size:"small"},on:{click:e.handlePrev}},[e._v("\n      上一步\n    ")]),a("el-button",{attrs:{type:"primary",disabled:e.submitDisabled,size:"small"},on:{click:e.handleNext}},[e._v("\n      提交并下一步\n    ")])],1)],1)},x=[],E=a("ed08"),w={name:"StepFourth",props:{resetData:{type:Object,required:!0}},data(){return{form:{multipartFile:null},multipartFileName:"",tableData:[],tableHeader:[{dataIndex:"ID",title:"测风塔编号"},{dataIndex:"CHID",title:"通道编号"},{dataIndex:"ORIGINCHANNEL",title:"原始通道名称"}],dictObjMap:{channelnametype:{WS:"风速",ZWS:"Z向风速",REL:"可靠性",WD:"风向",T:"气温",P:"气压",V:"电池",RH:"湿度",time:"时间"},type:{AVG:"均值",MAX:"最大值",MIN:"最小值",SD:"标准差",other:"其他"},unit:{ms:"m/s",angle:"°",temp:"℃",kpa:"kPa",hPa:"hPa",mb:"mb",mmHg:"mmHg",v:"V",rh:"%",quality:"%"}},dictOptionsMap:{channelnametype:[{value:"WS",label:"风速"},{value:"ZWS",label:"Z向风速"},{value:"REL",label:"可靠性"},{value:"WD",label:"风向"},{value:"T",label:"气温"},{value:"P",label:"气压"},{value:"V",label:"电池"},{value:"RH",label:"湿度"},{value:"time",label:"时间"}],type:[{label:"AVG",value:"均值"},{label:"MAX",value:"最大值"},{label:"MIN",value:"最小值"},{label:"SD",value:"标准差"},{label:"other",value:"其他"}],unit:[{label:"ms",value:"m/s"},{label:"angle",value:"°"},{label:"temp",value:"℃"},{label:"kpa",value:"kPa"},{label:"hPa",value:"hPa"},{label:"mb",value:"mb"},{label:"mmHg",value:"mmHg"},{label:"v",value:"V"},{label:"rh",value:"%"},{label:"quality",value:"%"}]},tableHeight:0,submitDisabled:!0}},created(){this.tableHeight=document.body.clientHeight-330},async mounted(){await this.handleFileSuccess()},methods:{beforeUpload(e){const t=e.size/1024/1024*50<1;return!!t||(this.$message({message:"上传文件需小于10MB",type:"warning"}),!1)},handleFileRemove(){this.multipartFileName="",this.form.multipartFile=null},async handleFileSuccess(){this.$message({message:"正在上传数据",type:"warning"});const e=await Object(c["x"])({ID:this.resetData&&this.resetData.ID,DATATYPE:this.resetData&&this.resetData.DATATYPE});if(e&&200===e.code){this.$message({message:"数据上传完成，正在解析通道",type:"success"});const t=e.data||[];this.tableData=!!t.length&&t.map(e=>(this.$set(e,"edit",!1),e.originalCHANNELNAMETYPE=e.CHANNELNAMETYPE,e.originalTYPE=e.type,e.originalHIGHT=e.HIGHT,e.originalUNIT=e.UNIT,e.originalOFF=e.OFF,e.originalSCALE=e.SCALE,e)),this.submitDisabled=!1}},async getDataDict(){const e=await Object(c["e"])();200===e.code&&(this.dictObjMap=e&&e.data,Object.keys(this.dictObjMap.channelnametype).forEach(e=>{this.dictOptionsMap.channelnametype.push({label:this.dictObjMap.channelnametype[e],value:e})}),Object.keys(this.dictObjMap.type).forEach(e=>{this.dictOptionsMap.type.push({label:this.dictObjMap.type[e],value:e})}),Object.keys(this.dictObjMap.unit).forEach(e=>{this.dictOptionsMap.unit.push({label:this.dictObjMap.unit[e],value:e})}))},cancelEdit(e){e.CHANNELNAMETYPE=e.originalCHANNELNAMETYPE,e.type=e.originalTYPE,e.HIGHT=e.originalHIGHT,e.UNIT=e.originalUNIT,e.OFF=e.originalOFF,e.SCALE=e.originalSCALE,e.edit=!1},async confirmEdit(e){console.log(e,this.form),e.edit=!1},handlePrev(){this.$emit("prev-step","fourth",this.resetData)},async handleNext(){const e=Object(E["c"])(this.tableData),t=e.map(e=>(delete e.originalCHANNELNAMETYPE,delete e.originalTYPE,delete e.originalHIGHT,delete e.originalUNIT,delete e.originalOFF,delete e.originalSCALE,delete e.edit,e)),a=await Object(c["m"])({channels:t});a&&200===a.code?(this.$message({message:"修改成功",type:"success"}),console.log("fourth",this.resetData),this.$emit("next-step","fourth",this.resetData)):this.handleFileSuccess()}}},F=w,I=(a("d83e"),Object(h["a"])(F,S,x,!1,null,"4ea64a5e",null)),A=I.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container",staticStyle:{"max-width":"900px",margin:"0 auto"}},[a("div",{staticStyle:{margin:"16px 0"}},[a("el-alert",{attrs:{title:e.title,type:e.alertType,center:"",closable:!1,"show-icon":""}}),e._e(),a("div",{staticStyle:{margin:"16px 0",display:"flex","justify-content":"center"}},[a("el-button",{attrs:{type:"primary",size:"small"}},[a("router-link",{attrs:{to:"/"}},[e._v("\n          返回首页\n        ")])],1)],1)],1)])},_=[],N={name:"StepSuccess",props:{resetData:{type:Object,required:!0}},data(){return{form:{multipartFile:null},multipartFileName:"",listQuery:{ID:"",NAME:"",STATE:"",UPLOAD_TIME:"",pageIndex:1,pageSize:9999},tableData:[],tableCell:[{dataIndex:"Task_number",title:"任务编号"},{dataIndex:"ID",title:"测风塔编号"},{dataIndex:"NAME",title:"测风塔名称"},{dataIndex:"UPLOAD_FILE",title:"上传文件"},{dataIndex:"UPLOAD_TIME",title:"上传时间"},{dataIndex:"STATE",title:"上传状态"}],dictObjMap:{},dictOptionsMap:{channelnametype:[],type:[],unit:[]},tableHeight:0,title:"",isShowTable:!1,alertType:"success"}},created(){this.tableHeight=document.body.clientHeight-370},async mounted(){this.resetData&&String(this.resetData.DATATYPE)?!this.resetData||"0"!==String(this.resetData.DATATYPE)&&"1"!==String(this.resetData.DATATYPE)?this.resetData&&"2"===String(this.resetData.DATATYPE)&&(this.title="正在入库",this.alertType="success",this.isShowTable=!1,await this.handleTableData(this.resetData.DATATYPE)):(this.title="正在启动入库程序",this.alertType="success",this.isShowTable=!1,await this.handleTableData(),this.title="入库程序已启动"):(this.title="数据有误",this.alertType="error",this.isShowTable=!1)},methods:{async getList(e){return new Promise(async(t,a)=>{const l=await Object(c["j"])(e);l&&200===l.code?(this.tableData=l.data&&l.data.mastItems,t(1)):a(0)})},async handleTableData(e){const t=await Object(c["n"])({ID:this.resetData&&this.resetData.ID,DATATYPE:this.resetData&&this.resetData.DATATYPE});t&&t.code},handleFilter(){this.getList(this.listQuery)},handlePrev(){this.$emit("prev-step","second",this.resetData)},handleNext(){console.log("second",this.resetData),this.$emit("next-step","second",this.resetData)}}},P=N,M=Object(h["a"])(P,O,_,!1,null,null,null),k=M.exports,j={name:"InsertTower",components:{StepFirst:s["a"],StepSecond:m,StepThird:T,StepFourth:A,StepSuccess:k},data(){return{active:0,prev:!1,form:null,isUpdate:!1,firstForm:{ID:""},secondForm:{ID:""},thirdForm:{},fourthForm:{},successForm:{}}},created(){},mounted(){},methods:{nextStep(e,t){console.log(e,t),t&&(this[e+"Form"]=t),this.active<4&&t&&(0===this.active&&(this.secondForm=t),1===this.active&&(this.thirdForm=t),2===this.active&&(this.fourthForm=t),3===this.active&&(this.successForm=t),this.active+=1)},prevStep(e,t){console.log("indexPrev",e,t),this.isUpdate=!0,this[e+"Form"]=t,this.active>0&&(this.active-=1)},submitForm(e,t){t&&(this[e+"Form"]=t),this.secondForm.x&&this.secondForm.x.length>0&&this.secondForm.x.map(e=>{delete e.name,delete e.isCheck}),this.secondForm.y&&this.secondForm.y.length>0&&this.secondForm.y.map(e=>{delete e.name,delete e.isCheck}),this.thirdForm.evaluation.x&&this.thirdForm.evaluation.x.length>0&&this.thirdForm.evaluation.x.map(e=>{delete e.key,delete e.rate,delete e.label}),this.thirdForm.evaluation.y&&this.thirdForm.evaluation.y.length>0&&this.thirdForm.evaluation.y.map(e=>{delete e.key,delete e.rate,delete e.label}),this.form=Object.assign({},this.firstForm,this.secondForm,this.thirdForm)},finish(){this.active=4}}},H=j,C=(a("fe08"),Object(h["a"])(H,l,i,!1,null,"36861eed",null));t["default"]=C.exports},d83e:function(e,t,a){"use strict";a("971e")},fe08:function(e,t,a){"use strict";a("2c46")}}]);