(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ab6ee91a"],{"09f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function r(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function i(e,t,a){const i=s(),l=e-i,o=20;let u=0;t="undefined"===typeof t?500:t;var d=function(){u+=o;var e=Math.easeInOutQuad(u,i,l,t);r(e),u<t?n(d):a&&"function"===typeof a&&a()};d()}},"31ed":function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return u}));var n=a("b775");window.GLOBAL_CONFIG.VUE_APP_BASE_API;const r=window.GLOBAL_CONFIG.VUE_APP_BASE_API_2;function s(e){return Object(n["a"])({url:r+"/atm/mast/showMap",method:"get",params:e})}function i(e){return Object(n["a"])({url:r+"/atm/mast/showPage",method:"post",data:e})}function l(e){return Object(n["a"])({url:r+"/atm/mast/showPageTrue",method:"post",data:e})}function o(e){return Object(n["a"])({url:r+"/atm/mast/detail",method:"post",data:e})}function u(e){return Object(n["a"])({url:r+"/atm/mast/listTrue",method:"get",params:e})}},"33fb":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("CurrencyForm",{ref:"currencyForm",attrs:{"ref-name":"shadowForm",labelWidth:"200px","form-key":0,"config-data":e.formData,"form-handle":e.formHandle,inline:!1,"set-fields-value":e.defaultValue},on:{changeCode:e.handleChangeCode,changeChannel:e.handleChangeChannel,getData:e.getData,adjust:e.handleAdjust,changeSourceCode:e.handleChangeSourceCode}})],1),a("p",{directives:[{name:"show",rawName:"v-show",value:e.shadowAnalysisShow,expression:"shadowAnalysisShow"}]},[e._v(e._s(e.shadowAnalysisTitle))]),a("el-dialog",{attrs:{title:"订正处理",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose}},[a("CurrencyForm",{ref:"makeupForm",attrs:{"ref-name":"ruleMakeupForm","config-data":e.formMakeupData,"set-fields-value":e.defaultMakeupValue,"form-handle":e.formMakeupHandle,"label-width":"150px",inline:!1,width:"600px"},on:{close:e.handleClose,submit:e.handleMakeupSubmit}})],1)],1)},r=[],s=a("31ed"),i=a("4c7d"),l=a("e50c"),o=a("ccce"),u=a("333d"),d={name:"DataCorrect",components:{Pagination:u["a"],CurrencyForm:o["a"]},data(){return{key:0,list:null,total:0,listLoading:!1,tableHeight:"78vh",itemsDescCodeArr:[{dataIndex:"warnID",label:"告警编号",width:"150px"},{dataIndex:"ID",label:"测风塔编号",width:"150px"},{dataIndex:"NAME",label:"测风塔名称",width:"230px"},{dataIndex:"channelID",label:"通道名称",width:"150px"},{dataIndex:"warnTime",label:"告警时间",width:"180px"},{dataIndex:"warnType",label:"告警内容"},{dataIndex:"status",label:"告警状态",width:"120px"}],dialogVisible:!1,formData:[{type:"elSelect",variable:"ID",name:"订正分析测风塔:",multiple:!1,data:[],clearable:!0,colProps:{xl:8,lg:8,md:12,sm:12,xs:24},required:!0,rules:[{required:!0,message:"请选择订正分析测风塔",trigger:"blur"}],emit:"changeCode"},{type:"elSelect",variable:"channelName",name:"订正分析通道:",multiple:!1,data:[],colProps:{xl:8,lg:8,md:12,sm:12,xs:24},required:!0,rules:[{required:!0,message:"请选择订正分析通道",trigger:"blur"}],disabled:!0,emit:"changeChannel"},{type:"elDatePicker",variable:"queryTime",name:"时间:",valueFormat:"yyyy-MM-dd",clearable:!0,pickerType:"daterange",colProps:{xl:8,lg:8,md:12,sm:12,xs:24},required:!0,rules:[{required:!0,message:"请选择时间",trigger:"blur"}],disabled:!0},{type:"elSelect",variable:"sourceID",name:"订正参考测风塔:",multiple:!1,data:[],colProps:{xl:8,lg:8,md:12,sm:12,xs:24},required:!0,rules:[{required:!0,message:"请选择订正参考测风塔",trigger:"blur"}],disabled:!0,emit:"changeSourceCode"},{type:"elSelect",variable:"sourceChannelName",name:"订正参考通道:",multiple:!1,data:[],colProps:{xl:8,lg:8,md:12,sm:12,xs:24},required:!0,rules:[{required:!0,message:"请选择订正参考通道",trigger:"blur"}],disabled:!0}],formHandle:[{type:"primary",name:"订正分析",emit:"getData",colProps:{xl:8,lg:8,md:12,sm:12,xs:24}},{type:"primary",name:"订正处理",emit:"adjust",disabled:!0,colProps:{xl:8,lg:8,md:12,sm:12,xs:24}}],formMakeupData:[{type:"elInput",variable:"ID",name:"测风塔编号:",clearable:!0,colProps:{xl:24,lg:24,md:24,sm:24,xs:24},disabled:!0,required:!0,rules:[{required:!0,message:"请输入测风塔编号",trigger:"blur"}]},{type:"elInput",variable:"type",name:"订正分析通道名称:",clearable:!0,colProps:{xl:24,lg:24,md:24,sm:24,xs:24},disabled:!0,required:!0,rules:[{required:!0,message:"请输入订正分析通道名称",trigger:"blur"}]},{type:"elInput",variable:"SCALE",name:"尺度因子:",clearable:!0,colProps:{xl:24,lg:24,md:24,sm:24,xs:24},required:!0,rules:[{required:!0,message:"请输入尺度因子",trigger:"blur"}]},{type:"elInput",variable:"OFF",name:"偏移量:",clearable:!0,colProps:{xl:24,lg:24,md:24,sm:24,xs:24},required:!0,rules:[{required:!0,message:"请输入偏移量",trigger:"blur"}]}],formMakeupHandle:[{type:"primary",name:"订正",emit:"submit",colProps:{xl:8,lg:8,md:12,sm:12,xs:24}},{type:"info",name:"关闭",emit:"close",colProps:{xl:8,lg:8,md:12,sm:12,xs:24}}],title:"",defaultValue:{},defaultMakeupValue:{},channelList:null,channelListMap:{},dateRange:[],shadowAnalysisTitle:"",shadowAnalysisShow:!1,multipleSelection:[]}},async mounted(){await this.getWindTower()},methods:{async getTowerDetail(e){window.localStorage.setItem("ATM_CURRENT_TOWER_ID",e);const t=await Object(s["e"])({ID:e}),a=t.data;a&&a.STARTTIME&&a.ENDTIME?this.dateRange=[a.STARTTIME,a.ENDTIME]:this.dateRange=[]},async getWindTower(){const e=await Object(s["a"])({userType:this.$store.getters.roles,organize:this.$store.getters.organize});if(200===e.code){const t=e&&e.data;console.log(t),this.formData[0].data=[],this.formData[3].data=[],Object.keys(t).forEach(e=>{this.formData[0].data.push({label:t[e],value:e}),this.formData[3].data.push({label:t[e],value:e})})}},async getChannels(e,t){const a=await Object(l["p"])({ID:e,channelType:1});if(200===a.code){const e=a&&a.data;this.channelListMap=e,t?(this.formData[4].data=[],Object.keys(e).forEach(t=>{this.formData[4].data.push({label:e[t],value:t}),this.formData[4].disabled=!1})):(this.formData[1].data=[],Object.keys(e).forEach(t=>{this.formData[1].data.push({label:e[t],value:t})}))}},async handleChangeChannel(e){this.defaultValue={...this.defaultValue,channelName:e.channelName},this.formHandle[1].disabled=!this.defaultValue.ID||!e.channelName},getData(e){this.listLoading=!0,this.$refs.currencyForm.$refs.shadowForm.validate(async t=>{if(!t)return this.listLoading=!1,console.log("error submit!!"),!1;{const t={...e,startDate:e.queryTime&&e.queryTime.length?e.queryTime[0]:void 0,endDate:e.queryTime&&e.queryTime.length?e.queryTime[1]:void 0};delete t.queryTime,Object.keys(t).forEach(e=>{t[e]||delete t[e]});const a=await Object(i["f"])(t);200===a.code?(this.shadowAnalysisShow=!0,this.shadowAnalysisTitle=`订正分析通道与参考通道相关性方程为: ${a.data&&a.data[0]}, 相关性为: ${a.data&&a.data[1]}，均值差为: ${a.data&&a.data[2]}`):this.shadowAnalysisShow=!1}this.listLoading=!1})},async handleChangeCode(e){if(this.defaultValue={...this.defaultValue,channelName:void 0,queryTime:void 0},!e.ID)return void(this.defaultValue={channelName:void 0,queryTime:[]});const t=this;await this.getChannels(e.ID),await this.getTowerDetail(e.ID),e.ID&&this.dateRange.length&&this.dateRange[0]&&this.dateRange[1]?(this.formData[1].disabled=!1,this.formData[3].disabled=!1,this.formData[2].disabled=!1,this.formData[2].pickerOptions={disabledDate(e){return e.getTime()>new Date(t.dateRange[1].split(" ")[0]).getTime()||e.getTime()<new Date(t.dateRange[0].split(" ")[0]).getTime()},shortcuts:[{text:"恢复默认",onClick(e){const a=new Date(t.dateRange[1].split(" ")[0]),n=new Date(t.dateRange[0].split(" ")[0]);e.$emit("pick",[n,a])}}]},this.defaultValue={...this.defaultValue,ID:e.ID,queryTime:[t.dateRange[0].split(" ")[0],t.dateRange[1].split(" ")[0]]}):(this.defaultValue={...this.defaultValue,queryTime:[]},this.formData[2].disabled=!0)},async handleChangeSourceCode(e){e.sourceID?(await this.getChannels(e.sourceID,!0),this.formData[4].disabled=!1):this.formData[4].disabled=!0},getStatusMap(){},handleSelectionChange(e){this.multipleSelection=e,console.log(this.multipleSelection)},async handleConfirm(e){let t="";if("all"===e)t="all";else{const e=[];this.multipleSelection.map(t=>{e.push(t.warnID)}),t=e.join(",")}const a=await handleWarn({warnIDs:t});200===a.code&&this.$message({message:a.msg||"处理成功！",type:"success"})},handleAdjust(){console.log(this.defaultValue),this.dialogVisible=!0,this.defaultMakeupValue={ID:this.defaultValue.ID,type:this.defaultValue.channelName,OFF:"",SCALE:""},this.$nextTick(()=>{this.$refs.makeupForm.returnDisplay(this.defaultMakeupValue)})},handleClose(){this.dialogVisible=!1},async handleMakeupSubmit(e){this.$refs.makeupForm.$refs.ruleMakeupForm.validate(async t=>{if(!t)return console.log("error submit!!"),!1;{const t=await Object(i["e"])({...e});t&&200===t.code&&this.$message({message:t&&t.msg||"提交成功",type:"success"}),this.dialogVisible=!1}})},handleSuccess(){}}},c=d,m=a("2877"),h=Object(m["a"])(c,n,r,!1,null,null,null);t["default"]=h.exports},"4c7d":function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"e",(function(){return i})),a.d(t,"a",(function(){return l})),a.d(t,"f",(function(){return o})),a.d(t,"d",(function(){return u})),a.d(t,"g",(function(){return d})),a.d(t,"c",(function(){return c}));var n=a("b775");const r=window.GLOBAL_CONFIG.VUE_APP_BASE_API_2;function s(e){return Object(n["a"])({url:r+"/atm/verifyTemp/mastManual",method:"get",params:e})}function i(e){return Object(n["a"])({url:r+"/atm/analysis/adjust",method:"get",params:e})}function l(e){return Object(n["a"])({url:r+"/atm/analysis/verticalExtra",method:"get",params:e})}function o(e){return Object(n["a"])({url:r+"/atm/analysis/correlation",method:"post",data:e})}function u(e){return Object(n["a"])({url:r+"/atm/analysis/oneButton",method:"post",data:e})}function d(e){return Object(n["a"])({url:r+"/atm/verify/resultShowPage",method:"post",data:e})}function c(e){return Object(n["a"])({url:r+"/atm/interpolation",method:"post",data:e})}},e50c:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"s",(function(){return l})),a.d(t,"n",(function(){return o})),a.d(t,"l",(function(){return u})),a.d(t,"k",(function(){return d})),a.d(t,"a",(function(){return c})),a.d(t,"m",(function(){return m})),a.d(t,"j",(function(){return h})),a.d(t,"o",(function(){return f})),a.d(t,"i",(function(){return p})),a.d(t,"g",(function(){return g})),a.d(t,"c",(function(){return b})),a.d(t,"e",(function(){return y})),a.d(t,"t",(function(){return w})),a.d(t,"h",(function(){return D})),a.d(t,"q",(function(){return O})),a.d(t,"f",(function(){return T})),a.d(t,"p",(function(){return I})),a.d(t,"r",(function(){return j})),a.d(t,"b",(function(){return x}));var n=a("b775");const r=window.GLOBAL_CONFIG.VUE_APP_BASE_API,s=window.GLOBAL_CONFIG.VUE_APP_BASE_API_2;function i(e){return Object(n["a"])({url:r+"/atm/analysis/avgchannellist",method:"get",params:e})}function l(e){return Object(n["a"])({url:s+"/atm/analysis/timeseries",method:"get",params:e})}function o(e){return Object(n["a"])({url:s+"/atm/getUpidData",method:"get",params:e})}function u(e){return Object(n["a"])({url:r+"/atm/analysis/getrosedict",method:"get",params:e})}function d(e){return Object(n["a"])({url:s+"/atm/analysis/getrose",method:"get",params:e})}function c(e){return Object(n["a"])({url:s+"/atm/analysis/dailyanalysis",method:"get",params:e})}function m(e){return Object(n["a"])({url:s+"/atm/analysis/dailyanalysis",method:"get",params:e})}function h(e){return Object(n["a"])({url:s+"/atm/analysis/frequencyanalysis",method:"get",params:e})}function f(e){return Object(n["a"])({url:s+"/atm/analysis/yearmaxwind50",method:"get",params:e})}function p(e){return Object(n["a"])({url:s+"/atm/analysis/weibullanalysis",method:"get",params:e})}function g(e){return Object(n["a"])({url:s+"/atm/analysis/shearanalysis",method:"get",params:e})}function b(e){return Object(n["a"])({url:r+"/atm/analysis/generationdict",method:"get",params:e})}function y(e){return Object(n["a"])({url:s+"/atm/analysis/generation",method:"get",params:e})}function w(e){return Object(n["a"])({url:r+"/atm/analysis/turbulencedict",method:"get",params:e})}function D(e){return Object(n["a"])({url:s+"/atm/analysis/turbulence",method:"get",params:e})}function O(e){return Object(n["a"])({url:r+"/atm/analysis/scatterdict",method:"get",params:e})}function T(e){return Object(n["a"])({url:s+"/atm/analysis/scatter",method:"get",params:e})}function I(e){return Object(n["a"])({url:s+"/atm/channel/list",method:"get",params:e})}function j(e){return Object(n["a"])({url:s+"/atm/analysis/statistics",method:"post",data:e})}function x(e){return Object(n["a"])({url:s+"/atm/analysis/download",method:"post",data:e,responseType:"blob"})}}}]);